{"version":3,"file":"static/js/82.0e85d09a.chunk.js","mappings":"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","sources":["views/dashboard/TopUpSaldo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { CButton, CCard, CCardBody, CCardHeader, CForm, CFormInput, CFormLabel, CFormSelect, CRow, CTable, CTableHead, CTableRow, CTableHeaderCell, CTableBody, CTableDataCell, CCol } from '@coreui/react';\r\nimport jwtDecode from 'jwt-decode';\r\nimport { ApiService } from '../../ApiService/ApiService';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ModalIframe from '../../components/header/ModalIframe';\r\nimport CurrencyInput from 'react-currency-input-field';\r\nconst TopUpSaldo = (props) => {\r\n\r\n    const whatsAppInfo = useSelector((state) => state.whatsAppInfo)\r\n    const token = jwtDecode(useSelector((state => state.token)));\r\n    const [data, setData] = useState([])\r\n    \r\n    const [modalIframe, setModalIframe] = useState({\r\n        visible : false,\r\n      })\r\n\r\n    // const cekToken = window.localStorage.getItem(\"token\");\r\n    // const tokenData = jwtDecode(cekToken);\r\n    // const configLocal = {token : cekToken}\r\n    // // console.log(\"line 12\", configLocal);\r\n\r\n    const url = `/wa/get-invoices`;\r\n\r\n    const fetchData = async ()=>{\r\n        const response = await ApiService.get(url);\r\n        // console.log(\"line 18\", response.data.data);\r\n        setData(...data, response.data.data)\r\n        // setData((data)=>([...data, response.data.data]))\r\n    }\r\n\r\n    const shorten = data.datetime_expired ? data.datetime_expired.substring(0,10) : '';\r\n\r\n    useEffect(()=>{\r\n\r\n        fetchData()\r\n    }, [data])\r\n\r\n    const handleCloseIframe =  () =>{\r\n        setModalIframe({...modalIframe, visible : false});\r\n    }\r\n\r\n    const caraTransfer = () =>{\r\n         \r\n        const param = [\r\n            \"key=abahKadabra\",\r\n            `nominal=${data.totalamount - data.feePayment}`,\r\n            'keterangan=TopUp Saldo',\r\n            `nomor=${whatsAppInfo.whatsappNumber}`,\r\n            `uid_sekolah=${25}`,\r\n            `action=caraTransfer`,\r\n            `clientID=${token.id}`\r\n        ]\r\n\r\n        const url =  `https://siswa.smartsystem.co.id/#/paymentv2?`+param.join('&');\r\n        setModalIframe({...modalIframe, visible : true, url : url});\r\n        console.log(\"line 45\", url);\r\n    }\r\n\r\n    console.log(\"line 60\", data);\r\n    const batalkanTransfer = () =>{\r\n        const param = [\r\n            \"key=abahKadabra\",\r\n            `nominal=${data.totalamount - data.feePayment}`,\r\n            'keterangan=TopUp Saldo',\r\n            `nomor=${whatsAppInfo.whatsappNumber}`,\r\n            `uid_sekolah=${25}`,\r\n            `action=batalkan`,\r\n            `clientID=${token.id}`\r\n        ]\r\n\r\n        const url =  `https://siswa.smartsystem.co.id/#/paymentv2?`+param.join('&');\r\n        setModalIframe({...modalIframe, visible : true, url : url});\r\n        console.log(\"line 71\", url);\r\n    }\r\n    const rupiah = (number)=>{\r\n        return new Intl.NumberFormat(\"id-ID\", {\r\n        //   style: \"currency\",\r\n          currency: \"IDR\"\r\n        }).format(number);\r\n      }\r\n  return (\r\n\r\n    <>\r\n    {(modalIframe.visible)?\r\n    <ModalIframe visible={modalIframe.visible} cbClose={handleCloseIframe} url={modalIframe.url}/>\r\n    :''\r\n    }\r\n    <CCard style={{ border: \"1px solid #FD841F\" }}>\r\n        <CCardHeader style={{ background: \"#FD841F\", color: \"#fff\", fontWeight: \"bold\" }}>\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n                    <h5>Top Up Saldo</h5>\r\n                </div>\r\n         </CCardHeader>\r\n         <CCardBody>\r\n            <CRow>\r\n                <CCol md={6}>\r\n                    <CCard style={{border : \"1px solid #DEF5E5\"}}>\r\n                        <CCardHeader style={{background : \"#DEF5E5\", border : \"none\", color : \"#379237\"}}>Detail Item</CCardHeader>\r\n                        <CCardBody>\r\n                            <CTable>\r\n                                <CTableHead>\r\n                                <CTableRow>\r\n                                 <CTableHeaderCell scope=\"col\">Item</CTableHeaderCell>\r\n                                 <CTableHeaderCell scope=\"col\">Nominal</CTableHeaderCell>\r\n                                </CTableRow>\r\n                                </CTableHead>\r\n                                <CTableBody>\r\n                                    <CTableRow>\r\n                                        <CTableDataCell>Top up saldo</CTableDataCell>\r\n                                        <CTableDataCell>{rupiah(data.totalamount - data.feePayment)}</CTableDataCell>\r\n                                    </CTableRow>\r\n                                    <CTableRow>\r\n                                        <CTableDataCell>Biaya Layanan</CTableDataCell>\r\n                                        <CTableDataCell>{rupiah(data.feePayment)}</CTableDataCell>\r\n                                    </CTableRow>\r\n                                </CTableBody>\r\n                            </CTable>\r\n                            <h3 style={{marginTop : \"20px\", fontSize : \"20px\", textAlign : \"right\"}}>Total : <span style={{fontSize : \"20px\"}}>{rupiah(data.totalamount)}</span></h3>\r\n                        </CCardBody>\r\n                    </CCard>\r\n                </CCol>\r\n                <CCol md={6}>\r\n                    <CCard style={{ border: \"1px solid #FF7D7D\" }}>\r\n                        <CCardHeader style={{background : \"#FF7D7D\", color : \"white\"}}>\r\n                            Informasi VA Pembayaran\r\n                        </CCardHeader>\r\n                        <CCardBody>\r\n                            <CForm>\r\n                                <CFormLabel>Kategori</CFormLabel>\r\n                                <CFormInput type='text' value=\"Top Up Saldo\" disabled/>\r\n                                <div className='mt-2'>\r\n                                    <CRow>\r\n                                        <CCol md={4}>\r\n                                        <CFormLabel>Bank</CFormLabel>\r\n                                        <CFormInput type='text' value={data.bankName} disabled/>\r\n                                        </CCol>\r\n                                        <CCol md={8}>\r\n                                        <CFormLabel>No VA</CFormLabel>\r\n                                        <CFormInput type='text' value={data.paymentcode} disabled/>\r\n                                        </CCol>\r\n                                    </CRow>\r\n                                </div>\r\n                                <div className='mt-2'>\r\n                                    <CRow>\r\n                                        <CCol md={6}>\r\n                                        <CFormLabel>Nominal Transfer</CFormLabel>\r\n                                        <CFormInput type='text' style={{textAlign : \"right\"}} value={rupiah(data.totalamount)} disabled/>\r\n                                        </CCol>\r\n                                        <CCol md={6}>\r\n                                        <CFormLabel>Tanggal Expired</CFormLabel>\r\n                                        <CFormInput type='text' value={shorten} disabled/>\r\n                                        </CCol>\r\n                                    </CRow>\r\n                                </div>\r\n                                <div className='mt-4'>\r\n                                    <CRow>\r\n                                        <CCol md={6}>\r\n                                        <CButton onClick={caraTransfer} style={{background : \"#FEB139\",width : \"210px\",height : \"40px\" ,color : \"white\", textAlign : \"center\", border : \"none\", borderRadius : \"0px\"}}>Cara Transfer</CButton>\r\n                                        </CCol>\r\n                                        <CCol md={6}>\r\n                                        <CButton onClick={batalkanTransfer} style={{background : \"#DC0000\",width : \"210px\",height : \"40px\" ,color : \"white\", textAlign : \"center\", border : \"none\", borderRadius : \"0px\"}}>Batalkan Pembayaran</CButton>\r\n                                        </CCol>\r\n                                    </CRow>\r\n                                </div>\r\n                            </CForm>\r\n                        </CCardBody>\r\n                    </CCard>\r\n                </CCol>\r\n            </CRow>\r\n         </CCardBody>\r\n    </CCard>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TopUpSaldo"],"names":["props","whatsAppInfo","useSelector","state","token","jwtDecode","useState","data","setData","visible","modalIframe","setModalIframe","fetchData","ApiService","response","shorten","datetime_expired","substring","useEffect","console","log","rupiah","number","Intl","NumberFormat","currency","format","cbClose","url","style","border","background","color","fontWeight","display","justifyContent","md","scope","totalamount","feePayment","marginTop","fontSize","textAlign","type","value","disabled","className","bankName","paymentcode","onClick","whatsappNumber","id","join","width","height","borderRadius"],"sourceRoot":""}