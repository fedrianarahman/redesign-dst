"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[759],{87238:function(e,t,n){n.d(t,{s:function(){return o}});var a=n(1413),r=n(82388),s=n(70174),o={get:function(e,t,n){var o=n&&n.token||localStorage.getItem("token"),i=(0,a.Z)({headers:{Authorization:"Bearer ".concat(o)},params:t},n);return r.Z.get(s.host+e,i)},post:function(e,t,n){var o=n&&n.token||localStorage.getItem("token"),i=(0,a.Z)({headers:{Authorization:"Bearer ".concat(o)}},n);return r.Z.post(s.host+e,t,i)}}},86759:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a=n(72791),r=n(78983),s=n(74165),o=n(15861),i=n(4942),l=n(1413),c=n(70885),d=n(87238),u=n(73451),h=n(63027),x=n(89743),m=n(16157),j=n(30456),f=n(59434),p=n(80184),g=function(e){var t=(0,j.Z)((0,f.v9)((function(e){return e.token}))),n=(0,a.useState)({form:(0,l.Z)((0,l.Z)({},e.dataApi),{},{uid_sekolah:t.id})}),r=(0,c.Z)(n,2),i=r[0],g=r[1],Z=function(e){e.preventDefault();var t=e.target.name,n=e.target.value,a=(0,l.Z)({},i.form);a[t]=n,g({form:a})},b=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(n){var a,r,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.onHide(),!i.form.id){t.next=12;break}return(a=(0,l.Z)({},i.form)).sendStatusDate&&null!=a.sendStatusDate||(a.sendStatusDate=0),t.next=7,d.s.post("/wa/outbox-save",a);case 7:r=t.sent,console.log("line 34",r.data),"success"==r.data.status&&(alert("data berhasil diubah"),e.onLoadData()),t.next=18;break;case 12:return t.next=14,d.s.post("/wa/outbox-save",i.form);case 14:o=t.sent,console.log("line 38",o.data),alert("data berhasil ditambahkan"),e.onLoadData();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,p.jsxs)(u.Z,{show:e.show,onHide:e.onHide,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,p.jsx)(u.Z.Header,{closeButton:!0,children:(0,p.jsx)(u.Z.Title,{children:e.modalTitle})}),(0,p.jsx)(u.Z.Body,{children:(0,p.jsx)(h.Z,{children:(0,p.jsx)(x.Z,{children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(h.Z.Group,{className:"col col-md-12",children:[(0,p.jsx)(h.Z.Label,{children:"Nomor Tujuan"}),(0,p.jsx)(h.Z.Control,{type:"text",name:"nomorTujuan",required:!0,onChange:Z,defaultValue:i.form.nomorTujuan,placeholder:"form modal check"})]}),(0,p.jsxs)(h.Z.Group,{className:"col col-md-12",children:[(0,p.jsx)(h.Z.Label,{children:"Pesan"}),(0,p.jsx)(h.Z.Control,{as:"textarea",placeholder:"Leave a comment here",style:{height:"100px",fontSize:"12px"},required:!0,name:"message",onChange:Z,defaultValue:i.form.message})]})]})})})}),(0,p.jsxs)(u.Z.Footer,{children:[(0,p.jsx)(m.Z,{variant:"secondary",onClick:e.onHide,children:"Close"}),(0,p.jsx)(m.Z,{variant:"warning",type:"submit",onClick:b,children:e.textBtn})]})]})},Z=function(){var e=new Date;e.getDate();var t=a.useState({jenis:"1",tanggal1:e||"",tanggal2:e||"",datas:[],satuData:{},show:!1,modalTitle:"",modalButton:""}),n=(0,c.Z)(t,2),u=n[0],h=n[1],x=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,a,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.jenis,n=u.tanggal1,a=u.tanggal2,r={limit:25,sort:"id desc"},e.next=4,d.s.post("/wa/get-outbox",{jenis:t,tanggal1:n,tanggal2:a},{params:r});case 4:o=e.sent,h((function(e){return(0,l.Z)((0,l.Z)({},e),{},{datas:o.data.data.datas,show:!1,satuData:o.data.data.datas[0]})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[u.show?(0,p.jsx)(g,{show:u.show,onHide:function(){return h((0,l.Z)((0,l.Z)({},u),{},{show:!1}))},modalTitle:u.modalTitle,textBtn:u.modalButton,onLoadData:m,dataApi:u.satuData}):"",(0,p.jsxs)(r.xH,{style:{border:"1px solid #FD841F"},children:[(0,p.jsx)(r.bn,{style:{background:"#FD841F",color:"#fff",fontWeight:"bold"},children:(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)("h5",{children:"Outbox"}),(0,p.jsx)(r.u5,{size:"sm",type:"submit",onClick:function(){h((function(e){return(0,l.Z)((0,l.Z)({},e),{},{show:!0,modalTitle:"Tambah Data",modalButton:"Save",satuData:{}})}))},children:"Add Data"})]})}),(0,p.jsxs)(r.sl,{children:[(0,p.jsx)(r.lx,{onSubmit:x,children:(0,p.jsxs)(r.rb,{children:[(0,p.jsxs)(r.b7,{md:3,children:[(0,p.jsx)(r.L8,{children:"Jenis"}),(0,p.jsxs)(r.LX,{name:"jenis",onChange:function(e){var t=e.target.name,n=e.target.value;h((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,i.Z)({},t,n))}))},children:[(0,p.jsx)("option",{value:"1",children:"Terkirim"}),(0,p.jsx)("option",{value:"0",children:"Antrian"})]})]}),function(){if("1"==u.jenis)return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.b7,{md:3,children:[(0,p.jsx)(r.L8,{children:"Tanggal 1"}),(0,p.jsx)(r.jO,{type:"date",name:"tanggal1",defaultValue:e.toLocaleDateString("en-CA")})]}),(0,p.jsxs)(r.b7,{md:3,children:[(0,p.jsx)(r.L8,{children:"Tanggal 2"}),(0,p.jsx)(r.jO,{type:"date",name:"tanggal2",defaultValue:e.toLocaleDateString("en-CA")})]})]})}(),(0,p.jsx)(r.b7,{md:3,children:(0,p.jsx)(r.u5,{size:"sm",style:{marginTop:"35px",background:"#379237",color:"#FFF",fontWeight:"bold",border:"none"},type:"submit",children:"Cari"})})]})}),(0,p.jsxs)(r.Sx,{small:!0,className:"mt-4 table-responsive table-bordered",children:[(0,p.jsx)(r.V,{children:(0,p.jsxs)(r.T6,{children:[(0,p.jsx)(r.is,{scope:"col",children:"Nomor"}),(0,p.jsx)(r.is,{scope:"col",children:"Tanggal dibuat"}),(0,p.jsx)(r.is,{scope:"col",children:"Nomor Tujuan"}),(0,p.jsx)(r.is,{scope:"col",children:"Pesan"}),(0,p.jsx)(r.is,{scope:"col",children:"Harga"}),(0,p.jsx)(r.is,{scope:"col",children:"Aksi"})]})}),(0,p.jsx)(r.NR,{children:u.datas.map((function(e,t){var n=e.createdAt.substr(0,10),a=e.createdAt.substr(11,8);return(0,p.jsxs)(r.T6,{children:[(0,p.jsx)(r.NN,{children:t+1}),(0,p.jsx)(r.NN,{children:"".concat(n," ").concat(a)}),(0,p.jsx)(r.NN,{children:e.nomorTujuan}),(0,p.jsx)(r.NN,{children:e.message}),(0,p.jsx)(r.NN,{children:e.harga}),(0,p.jsx)(r.NN,{children:(0,p.jsx)(r.u5,{size:"sm",onClick:function(){return function(e){h((function(t){return(0,l.Z)((0,l.Z)({},t),{},{show:!0,modalTitle:"Edit Data",modalButton:"Update",satuData:e})}))}(e)},children:"Edit"})})]},e.id)}))})]})]})]})]})},b=function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(r.rb,{children:(0,p.jsx)(r.b7,{md:12,style:{marginTop:"30px"},children:(0,p.jsx)(Z,{})})})})}},70174:function(e){e.exports=JSON.parse('{"host":"https://wa.vcible.com/api/dev"}')}}]);
//# sourceMappingURL=759.c06a6e80.chunk.js.map