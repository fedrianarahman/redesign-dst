"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[222],{87238:function(e,n,t){t.d(n,{s:function(){return s}});var a=t(1413),r=t(82388),i=t(70174),s={get:function(e,n,t){var s=t&&t.token||localStorage.getItem("token"),o=(0,a.Z)({headers:{Authorization:"Bearer ".concat(s)},params:n},t);return r.Z.get(i.host+e,o)},post:function(e,n,t){var s=t&&t.token||localStorage.getItem("token"),o=(0,a.Z)({headers:{Authorization:"Bearer ".concat(s)}},t);return r.Z.post(i.host+e,n,o)}}},2222:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var a=t(4942),r=t(1413),i=t(74165),s=t(15861),o=t(42982),l=t(40181);var c=t(70885),u=t(72791),d=t(78983),h=t(80184),m=function(e){var n=e.id,t=e.type,a=e.name,r=e.handleClick,i=e.isChecked,s=e.data;return(0,h.jsx)("input",{id:n,name:a,type:t,onChange:function(e){return r(e,s)},checked:i})},f=t(87238),p=t(30456),x=function(){var e=(0,u.useState)({tahunAjaranSekolah:"",kelas:"",nama:""}),n=(0,c.Z)(e,2),t=n[0],x=n[1],j=(0,u.useState)([]),k=(0,c.Z)(j,2),v=k[0],b=k[1],g=(0,u.useState)([]),y=(0,c.Z)(g,2),Z=y[0],S=y[1],C=(0,u.useState)([]),w=(0,c.Z)(C,2),_=w[0],F=w[1],N=(0,u.useState)(!1),A=(0,c.Z)(N,2),P=A[0],T=A[1],L=(0,u.useState)({input:"",output:""}),D=(0,c.Z)(L,2),I=D[0],B=D[1],O=(0,u.useState)([]),H=(0,c.Z)(O,2),z=(H[0],H[1]);(0,u.useEffect)((function(){V(),K()}),[]);var E=function(e){e.isChecked=!e.isChecked;var n=(0,o.Z)(v);z(e),b(n)},V=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,a,r,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sessionStorage.getItem("tokenSS"),t=(0,p.Z)(n),a={where:{sekolah:t.user.uid_sekolah},limit:1e3,sort:"tahun_ajaran desc"},"/tahunajaran",r=a,s={token:n},e.next=8,f.s.get("/tahunajaran",r,s);case 8:o=e.sent,S(o.data.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,a,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sessionStorage.getItem("tokenSS"),t=(0,p.Z)(n),a={sort:"nama_kelas asc",uid_sekolah:t.id},r={token:n},e.next=6,f.s.get("/kelas",a,r);case 6:s=e.sent,F(s.data.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var n=e.target.name,t=e.target.value;x((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,t))}))},R=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var a,r,s,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=window.sessionStorage.getItem("tokenSS"),r={"a.tahun":t.tahunAjaranSekolah},t.nama&&(r["b.fullname"]={contains:t.nama}),t.kelas&&(r["a.id_kelas"]=t.kelas),s={where:r},o={token:a},e.next=9,f.s.get("/siswadss/kelastahunajaran",s,o);case 9:l=e.sent,b(l.data.data),v.isChecked=!1;case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W=[{label:"nama_siswa",value:"Dede Rahmat"},{label:"nama_kelas",value:"1 E"},{label:"tagihan",value:"\u23fa    20.000 SPP Oktober 2022\n\u23fa    20.000 SPP November 2022\nTOTAL TAGIHAH 40.000\n            "}],X=W.map((function(e){return"$("+e.label+")"})).join("\n"),$=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,a,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.Z)(v).filter((function(e){return e.isChecked})),t=I.input,a=n,r=t,e.next=6,f.s.post("/wa/blaster",{dataPenerima:a,formatPesan:r});case 6:s=e.sent,console.log("line 188",s.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.xH,{style:{marginBottom:"30px",border:"1px solid #FD841F"},children:[(0,h.jsx)(d.bn,{style:{background:"#FD841F",color:"#fff",fontWeight:"bold",textAlign:"center"},children:"Tahap 1 : Membuat Format  Pesan"}),(0,h.jsx)(d.sl,{children:(0,h.jsx)(d.lx,{children:(0,h.jsxs)(d.rb,{children:[(0,h.jsxs)(d.b7,{md:8,children:[(0,h.jsx)(d.L8,{children:"Format Pesan"}),(0,h.jsx)(d.PB,{style:{height:"100px"},name:"input",onChange:function(e){var n,t,i=e.target.name,s=e.target.value,o=s,l={};W.map((function(e){l[e.label]=e.value})),t=l,o=(o+"").replace(/\$\(([^\)]+)?\)/g,(function(e,n){return t[n]})),B((0,r.Z)((0,r.Z)({},I),{},(n={},(0,a.Z)(n,i,s),(0,a.Z)(n,"output",o),n)))}})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{children:"Data"}),(0,h.jsx)(d.PB,{style:{height:"100px"},readOnly:!0,defaultValue:X})]}),(0,h.jsxs)(d.b7,{md:8,children:[(0,h.jsx)(d.L8,{children:"Perkiraan Pesan"}),(0,h.jsx)(d.PB,{style:{height:"100px"},defaultValue:I.output,readOnly:!0})]})]})})})]}),(0,h.jsxs)(d.xH,{style:{border:"1px solid #FD841F"},children:[(0,h.jsx)(d.bn,{style:{background:"#FD841F",color:"#fff",fontWeight:"bold",textAlign:"center"},children:"Tahap 2 : Memilih Siswa Yang Dituju"}),(0,h.jsxs)(d.sl,{children:[(0,h.jsx)(d.lx,{onSubmit:R,id:"wa-blaste-form",children:(0,h.jsxs)(d.rb,{children:[(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom04",children:"Tahun Ajaran"}),(0,h.jsxs)(d.LX,{id:"validationCustom04",name:"tahunAjaranSekolah",onChange:M,children:[(0,h.jsx)("option",{value:"",children:"Pilih..."}),Z.map((function(e){return(0,h.jsx)("option",{value:e.tahun_ajaran,children:e.tahun_ajaran},e.id)}))]})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom04",children:"Kelas"}),(0,h.jsxs)(d.LX,{id:"validationCustom04",name:"kelas",onChange:M,children:[(0,h.jsx)("option",{value:"",children:"Semua"}),_.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.nama_kelas},e.id)}))]})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom05",children:"Nama"}),(0,h.jsx)(d.jO,{type:"text",id:"validationCustom05",name:"nama",onChange:M,autoComplete:"off"}),(0,h.jsx)(d.CO,{invalid:!0,children:"Please provide a valid zip."})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.u5,{color:"primary",style:{marginTop:"30px"},type:"submit",children:"Cari"}),(0,h.jsx)(d.u5,{style:{marginTop:"30px",marginLeft:"10px",background:"#F6F54D",color:"#000",border:"none"},onClick:$,children:"kirim Pesan"})]})]})}),(0,h.jsxs)(d.Sx,{style:{marginTop:"30px"},className:"table-stripped",children:[(0,h.jsx)(d.V,{style:{background:"#FFBF00"},children:(0,h.jsxs)(d.T6,{children:[(0,h.jsx)(d.is,{scope:"col",children:"No"}),(0,h.jsx)(d.is,{scope:"col",children:"Nama"}),(0,h.jsx)(d.is,{scope:"col",children:"No Hp Ayah"}),(0,h.jsx)(d.is,{scope:"col",children:"No Hp Ibu"}),(0,h.jsx)(d.is,{scope:"col",children:"Kelas"}),(0,h.jsx)(d.is,{scope:"col",children:(0,h.jsx)(m,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:function(e){T(!P);var n,t=function(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,l.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw i}}}}(e);try{for(t.s();!(n=t.n()).done;){n.value.isChecked=!P}}catch(a){t.e(a)}finally{t.f()}},data:v,isChecked:P})})]})}),(0,h.jsx)(d.NR,{children:v.map((function(e,n){return(0,h.jsx)(u.Fragment,{children:(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.T6,{children:[(0,h.jsx)(d.NN,{children:n+1}),(0,h.jsx)(d.NN,{children:e.fullname}),(0,h.jsx)(d.NN,{children:e.ayah_mobile1}),(0,h.jsx)(d.NN,{children:e.ibu_mobile1}),(0,h.jsx)(d.NN,{children:e.nama_kelas}),(0,h.jsx)(d.NN,{children:(0,h.jsx)(m,{type:"checkbox",name:e.fullname,id:e.id,handleClick:E,data:e,isChecked:e.isChecked},e.id)})]},e.id)})},e.id)}))})]})]})]})]})}},70174:function(e){e.exports=JSON.parse('{"host":"http://103.146.62.138:9092"}')}}]);
//# sourceMappingURL=222.806076d6.chunk.js.map