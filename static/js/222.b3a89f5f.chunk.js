"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[222],{2222:function(e,n,a){a.r(n),a.d(n,{default:function(){return p}});var t=a(4942),r=a(1413),i=a(74165),s=a(15861),l=a(42982),o=a(40181);var c=a(70885),u=a(72791),d=a(78983),h=a(80184),m=function(e){var n=e.id,a=e.type,t=e.name,r=e.handleClick,i=e.isChecked,s=e.data;return(0,h.jsx)("input",{id:n,name:t,type:a,onChange:function(e){return r(e,s)},checked:i})},x=a(87238),f=a(30456),p=function(){var e=(0,u.useState)({tahunAjaranSekolah:"",kelas:"",nama:""}),n=(0,c.Z)(e,2),a=n[0],p=n[1],j=(0,u.useState)([]),k=(0,c.Z)(j,2),b=k[0],v=k[1],g=(0,u.useState)([]),y=(0,c.Z)(g,2),Z=y[0],C=y[1],S=(0,u.useState)([]),w=(0,c.Z)(S,2),_=w[0],F=w[1],N=(0,u.useState)(!1),P=(0,c.Z)(N,2),A=P[0],T=P[1],L=(0,u.useState)({input:"",output:""}),D=(0,c.Z)(L,2),I=D[0],H=D[1],O=(0,u.useState)([]),B=(0,c.Z)(O,2);B[0],B[1];(0,u.useEffect)((function(){V(),K()}),[]);var E=function(e,n){n.isChecked=!n.isChecked;var a=(0,l.Z)(b);v(a),console.log("line 81",n)},V=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,a,t,r,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sessionStorage.getItem("tokenSS"),a=(0,f.Z)(n),t={where:{sekolah:a.user.uid_sekolah},limit:1e3,sort:"tahun_ajaran desc"},"/tahunajaran",r=t,s={token:n},e.next=8,x.s.get("/tahunajaran",r,s);case 8:l=e.sent,C(l.data.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,a,t,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sessionStorage.getItem("tokenSS"),a=(0,f.Z)(n),t={sort:"nama_kelas asc",uid_sekolah:a.id},r={token:n},e.next=6,x.s.get("/kelas",t,r);case 6:s=e.sent,F(s.data.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var n=e.target.name,a=e.target.value;p((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,t.Z)({},n,a))}))},R=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r,s,l,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t=window.sessionStorage.getItem("tokenSS"),r={"a.tahun":a.tahunAjaranSekolah},a.nama&&(r["b.fullname"]={contains:a.nama}),a.kelas&&(r["a.id_kelas"]=a.kelas),s={where:r},l={token:t},e.next=9,x.s.get("/siswadss/kelastahunajaran",s,l);case 9:o=e.sent,v(o.data.data),b.isChecked=!1;case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W=[{label:"nama_siswa",value:"Dede Rahmat"},{label:"nama_kelas",value:"1 E"},{label:"tagihan",value:"\u23fa    20.000 SPP Oktober 2022\n\u23fa    20.000 SPP November 2022\nTOTAL TAGIHAH 40.000\n            "}],X=W.map((function(e){return"$("+e.label+")"})).join("\n"),$=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,a,t,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Z)(b).filter((function(e){return e.isChecked})),a=I.input,t=n,r=a,e.next=6,x.s.post("/wa/blaster",{dataPenerima:t,formatPesan:r});case 6:s=e.sent,console.log("line 188",s.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.xH,{style:{marginBottom:"30px",border:"1px solid #FD841F"},children:[(0,h.jsx)(d.bn,{style:{background:"#FD841F",color:"#fff",fontWeight:"bold",textAlign:"center"},children:"Tahap 1 : Membuat Format  Pesan"}),(0,h.jsx)(d.sl,{children:(0,h.jsx)(d.lx,{children:(0,h.jsxs)(d.rb,{children:[(0,h.jsxs)(d.b7,{md:8,children:[(0,h.jsx)(d.L8,{children:"Format Pesan"}),(0,h.jsx)(d.PB,{style:{height:"100px"},name:"input",onChange:function(e){var n,a,i=e.target.name,s=e.target.value,l=s,o={};W.map((function(e){o[e.label]=e.value})),a=o,l=(l+"").replace(/\$\(([^\)]+)?\)/g,(function(e,n){return a[n]})),H((0,r.Z)((0,r.Z)({},I),{},(n={},(0,t.Z)(n,i,s),(0,t.Z)(n,"output",l),n)))}})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{children:"Data"}),(0,h.jsx)(d.PB,{style:{height:"100px"},readOnly:!0,defaultValue:X})]}),(0,h.jsxs)(d.b7,{md:8,children:[(0,h.jsx)(d.L8,{children:"Perkiraan Pesan"}),(0,h.jsx)(d.PB,{style:{height:"100px"},defaultValue:I.output,readOnly:!0})]})]})})})]}),(0,h.jsxs)(d.xH,{style:{border:"1px solid #FD841F"},children:[(0,h.jsx)(d.bn,{style:{background:"#FD841F",color:"#fff",fontWeight:"bold",textAlign:"center"},children:"Tahap 2 : Memilih Siswa Yang Dituju"}),(0,h.jsxs)(d.sl,{children:[(0,h.jsx)(d.lx,{onSubmit:R,id:"wa-blaste-form",children:(0,h.jsxs)(d.rb,{children:[(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom04",children:"Tahun Ajaran"}),(0,h.jsxs)(d.LX,{id:"validationCustom04",name:"tahunAjaranSekolah",onChange:M,children:[(0,h.jsx)("option",{value:"",children:"Pilih..."}),Z.map((function(e){return(0,h.jsx)("option",{value:e.tahun_ajaran,children:e.tahun_ajaran},e.id)}))]})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom04",children:"Kelas"}),(0,h.jsxs)(d.LX,{id:"validationCustom04",name:"kelas",onChange:M,children:[(0,h.jsx)("option",{value:"",children:"Semua"}),_.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.nama_kelas},e.id)}))]})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.L8,{htmlFor:"validationCustom05",children:"Nama"}),(0,h.jsx)(d.jO,{type:"text",id:"validationCustom05",name:"nama",onChange:M,autoComplete:"off"}),(0,h.jsx)(d.CO,{invalid:!0,children:"Please provide a valid zip."})]}),(0,h.jsxs)(d.b7,{md:3,children:[(0,h.jsx)(d.u5,{color:"primary",style:{marginTop:"30px"},type:"submit",children:"Cari"}),(0,h.jsx)(d.u5,{style:{marginTop:"30px",marginLeft:"10px",background:"#F6F54D",color:"#000",border:"none"},onClick:$,children:"kirim Pesan"})]})]})}),(0,h.jsxs)(d.Sx,{style:{marginTop:"30px"},className:"table-stripped",children:[(0,h.jsx)(d.V,{style:{background:"#FFBF00"},children:(0,h.jsxs)(d.T6,{children:[(0,h.jsx)(d.is,{scope:"col",children:"No"}),(0,h.jsx)(d.is,{scope:"col",children:"Nama"}),(0,h.jsx)(d.is,{scope:"col",children:"No Hp Ayah"}),(0,h.jsx)(d.is,{scope:"col",children:"No Hp Ibu"}),(0,h.jsx)(d.is,{scope:"col",children:"Kelas"}),(0,h.jsx)(d.is,{scope:"col",children:(0,h.jsx)(m,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:function(e,n){T(!A);var a,t=function(e,n){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=(0,o.Z)(e))||n&&e&&"number"===typeof e.length){a&&(e=a);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw i}}}}(n);try{for(t.s();!(a=t.n()).done;){a.value.isChecked=!A}}catch(r){t.e(r)}finally{t.f()}},data:b,isChecked:A})})]})}),(0,h.jsx)(d.NR,{children:b.map((function(e,n){return(0,h.jsx)(u.Fragment,{children:(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.T6,{children:[(0,h.jsx)(d.NN,{children:n+1}),(0,h.jsx)(d.NN,{children:e.fullname}),(0,h.jsx)(d.NN,{children:e.ayah_mobile1}),(0,h.jsx)(d.NN,{children:e.ibu_mobile1}),(0,h.jsx)(d.NN,{children:e.nama_kelas}),(0,h.jsx)(d.NN,{children:(0,h.jsx)(m,{type:"checkbox",name:e.fullname,id:e.id,handleClick:E,data:e,isChecked:e.isChecked},e.id)})]},e.id)})},e.id)}))})]})]})]})]})}}}]);
//# sourceMappingURL=222.b3a89f5f.chunk.js.map